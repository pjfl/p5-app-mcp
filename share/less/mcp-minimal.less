/* Colours */
@button-border: gainsboro;
@contrast: whitesmoke;
@line-border: gray;
@panel-shadow: gray;
@tile-active: bisque;
@tile-failed: red;
@tile-finished: darkgreen;
@tile-hold: blue;
@tile-inactive: lightgray;
@tile-running: lightgreen;
@tile-starting: cyan;
@tile-terminated: darkred;
@text: black;
@text-watermark: gray;
@toggle: gray;

/* Dimensions */
@row-max-width: 30rem;
@state-key-gap: 0.5rem;

/* Font Sizes and Weights */
@state-key-font-size: 0.8rem;

#fonts() {
    cursive: 'Segoe Print', 'Bradley Hand', 'Chilanka', casual, cursive;
    mono: 'Cascadia Code', 'Menlo', 'DejaVu Sans Mono', ui-monospace, monospace;
    sans: 'Roboto', 'Segoe UI', 'Helvetica', system-ui, sans-serif;
    serif: 'DejaVu Serif', 'Sitka Small', serif;
}
.state-container {
    position: relative;
    .diagram-container {
        align-items: flex-start; display: flex; gap: 0.5rem;
        .box-table {
            display: none; flex-direction: column;
        }
        .box-table.open, .box-row {
            display: flex; flex-wrap: wrap; gap: 1rem;
            max-width: @row-max-width;
        }
        .box-tile, .job-tile {
            border: 1px solid @line-border; border-radius: 5px;
            box-shadow: 3px 3px 3px @panel-shadow; padding: 0.25rem;
            &:has(> .box-table.open) {
                padding: 0.25rem 0.25rem 0.5rem 0.25rem;
            }
        }
        .box-tile {
            & > .title {
                align-items: center; display: flex; gap: 1rem;
                justify-content: space-between;
                &:not(:has(.button-icon.reversed)) {
                    padding-bottom: 0.25rem;
                }
                .box-toggle {
                    color: @toggle; cursor: pointer; height: 20px;
                    width: 20px;
                    &.reversed {
                        transform: rotate(180deg);
                    }
                }
            }
        }
        .title a {
            cursor: pointer; text-decoration: none;
        }
    }
    .dependencies {
        left: 0; pointer-events: none; position: absolute; top: 0;
    }
}
.box-tile.active, .job-tile.active, .job-state.active {
    background: @tile-active !important; color: @text !important;
}
.box-tile.failed, .job-tile.failed, .job-state.failed {
    background: @tile-failed !important; color: @contrast !important;
}
.box-tile.finished, .job-tile.finished, .job-state.finished {
    background: @tile-finished !important; color: @contrast !important;
}
.box-tile.hold, .job-tile.hold, .job-state.hold {
    background: @tile-hold !important; color: @contrast !important;
}
.box-tile.inactive, .job-tile.inactive, .job-state.inactive {
    background: @tile-inactive !important; color: @text !important;
}
.box-tile.running, .job-tile.running, .job-state.running {
    background: @tile-running !important; color: @text !important;
}
.box-tile.starting, .job-tile.starting, .job-state.starting {
    background: @tile-starting !important; color: @text !important;
}
.box-tile.terminated, .job-tile.terminated, .job-state.terminated {
    background: @tile-terminated !important; color: @contrast !important;
}
.input-field .job-state {
    text-transform: uppercase;
}
.state-key {
    align-items: baseline; display: inline-flex; gap: @state-key-gap;
    .job-state-list {
        display: flex; gap: @state-key-gap; list-style: none; margin: 0;
        padding: 0;
        .job-state-item {
            display: inline-block;
            .job-tile {
                border: 2px inset @button-border; border-radius: 5px;
                font-size: (@state-key-font-size - 0.1rem); padding: 0.25rem;
                text-transform: uppercase;
            }
        }
    }
    .state-key-label {
        color: @text-watermark; font-family: #fonts[sans];
        font-size: @state-key-font-size;
    }
}
